# Example automations.yaml entries for Home Agent Observability
#
# INSTRUCTIONS:
# 1. Open your automations.yaml file (usually in /config/automations.yaml)
# 2. Copy the THREE automations below and paste them into your automations.yaml
# 3. Save the file
# 4. Restart Home Assistant (or reload automations if supported)
#
# NOTE: These are the automation entries WITHOUT the "automation:" header,
# because automations.yaml should only contain the list of automations.
#
# =============================================================================

- id: home_agent_conversation_counter
  alias: "Home Agent: Increment Conversation Counter"
  description: "Increment the total conversation counter when a conversation finishes"
  trigger:
    - platform: event
      event_type: home_agent.conversation.finished
  action:
    - service: counter.increment
      target:
        entity_id: counter.home_agent_conversations_total

- id: home_agent_tool_counter
  alias: "Home Agent: Track Tool Success/Failure"
  description: "Track successful and failed tool executions"
  trigger:
    - platform: event
      event_type: home_agent.tool.executed
  action:
    - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.event.data.success }}"
          sequence:
            - service: counter.increment
              target:
                entity_id: counter.home_agent_tool_successes
      default:
        - service: counter.increment
          target:
            entity_id: counter.home_agent_tool_failures

- id: home_agent_error_counter
  alias: "Home Agent: Increment Error Counter"
  description: "Track total errors from Home Agent"
  trigger:
    - platform: event
      event_type: home_agent.error
  action:
    - service: counter.increment
      target:
        entity_id: counter.home_agent_errors_total
