name: "Multilingual Basic Conversation"
description: "Test basic conversation flow in multiple languages"

setup:
  llm_base_url: "http://localhost:11434/v1"
  llm_model: "qwen2.5:3b"
  llm_api_key: "test_key"
  streaming_enabled: false
  history_enabled: true
  conversation_id: "multilingual_test"
  entities:
    - entity_id: "light.living_room"
      state: "off"
      attributes:
        brightness: 0
        friendly_name: "Living Room Light"
    - entity_id: "light.bedroom"
      state: "on"
      attributes:
        brightness: 128
        friendly_name: "Bedroom Light"

steps:
  - user: "Turn on the living room light"
    language: "en"
    mock_response: "I've turned on the living room light."
    expected_response_language: "en"
    tools_used:
      - "ha_control"
    expected_response_contains: "living room"
    timeout: 10

  - user: "Schalte das Schlafzimmerlicht aus"
    language: "de"
    mock_response: "Ich habe das Schlafzimmerlicht ausgeschaltet."
    expected_response_language: "de"
    tools_used:
      - "ha_control"
    expected_response_contains: "Schlafzimmer"
    timeout: 10

  - user: "¿Qué luces están encendidas?"
    language: "es"
    mock_response: "La luz de la sala de estar está encendida."
    expected_response_language: "es"
    tools_used:
      - "ha_query"
    expected_response_contains: "sala"
    timeout: 10

  - user: "Éteins toutes les lumières"
    language: "fr"
    mock_response: "J'ai éteint toutes les lumières."
    expected_response_language: "fr"
    tools_used:
      - "ha_control"
    expected_response_contains: "lumières"
    timeout: 10

  - user: "What is the status of the bedroom light?"
    language: "en"
    mock_response: "The bedroom light is currently off."
    expected_response_language: "en"
    tools_used:
      - "ha_query"
    expected_response_contains: "bedroom"
    timeout: 10

  - user: "Accendi la luce del soggiorno"
    language: "it"
    mock_response: "Ho acceso la luce del soggiorno."
    expected_response_language: "it"
    tools_used:
      - "ha_control"
    expected_response_contains: "soggiorno"
    timeout: 10

assertions:
  - conversation_history_length: 12
  - total_tool_calls: 6
